var app=function(){"use strict";function t(){}function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t,e){return 0===e&&t(),()=>{--e||t()}}function o(t){t()}function r(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n)}function i(t){t.parentNode.removeChild(t)}function s(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function l(){return document.createDocumentFragment()}function c(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(){return document.createComment("")}function b(t,e,n,o){t.addEventListener(e,n,o)}function f(t,e,n,o){t.removeEventListener(e,n,o)}function h(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function m(t,e){t.data=""+e}function y(t,e,n){t.style.setProperty(e,n)}function g(t,e){for(var n=0;n<t.options.length;n+=1){var o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function _(t){var e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function v(){return Object.create(null)}function p(t){t._lock=!0,j(t._beforecreate),j(t._oncreate),j(t._aftercreate),t._lock=!1}function k(t,e){t._handlers=v(),t._slots=v(),t._bind=e._bind,t._staged={},t.options=e,t.root=e.root||t,t.store=e.store||t.root.store,e.root||(t._beforecreate=[],t._oncreate=[],t._aftercreate=[])}function j(t){for(;t&&t.length;)t.shift()()}var N={destroy:function(e){this.destroy=t,this.fire("destroy"),this.set=t,this._fragment.d(!1!==e),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var o=0;o<n.length;o+=1){var r=n[o];if(!r.__calling)try{r.__calling=!0,r.call(this,e)}finally{r.__calling=!1}}},on:function(t,e){var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(e({},t)),this.root._lock||p(this.root)},_recompute:t,_set:function(t){var n=this._state,o={},r=!1;for(var a in t=e(this._staged,t),this._staged={},t)this._differs(t[a],n[a])&&(o[a]=r=!0);r&&(this._state=e(e({},n),t),this._recompute(o,this._state),this._bind&&this._bind(o,this._state),this._fragment&&(this.fire("state",{changed:o,current:this._state,previous:n}),this._fragment.p(o,this._state),this.fire("update",{changed:o,current:this._state,previous:n})))},_stage:function(t){e(this._staged,t)},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};function O(t){k(this,t),this._state=e({select:"0"},t.data),this._intro=!!t.intro,this._fragment=function(t,e){var n,s,l,d,y;function g(n){t.fire("click",{color:e.color})}return{c(){n=c("div"),s=c("span"),l=u(e.label),s.className="svelte-xc3qo4",b(n,"click",g),n.className=d="Button "+e.color+" "+("1"==e.select?"select":"")+" svelte-xc3qo4",h(n,"test",e.select)},m(t,e){a(t,n,e),r(n,s),r(s,l),y=!0},p(t,o){e=o,t.label&&m(l,e.label),(t.color||t.select)&&d!==(d="Button "+e.color+" "+("1"==e.select?"select":"")+" svelte-xc3qo4")&&(n.className=d),t.select&&h(n,"test",e.select)},i(t,e){y||this.m(t,e)},o:o,d(t){t&&i(n),f(n,"click",g)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor)),this._intro=!0}function x(n){var s,l,u,d;k(this,n),this._state=e({},n.data),this._intro=!!n.intro,this._slotted=n.slots||{},this._fragment=(s=this,this._state,d=s._slotted.default,{c(){(l=c("div")).className="Buttons svelte-mmcuhn"},m(t,e){a(t,l,e),d&&r(l,d),u=!0},p:t,i(t,e){u||this.m(t,e)},o:o,d(t){t&&i(l),d&&function(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}(l,d)}}),n.target&&(this._fragment.c(),this._mount(n.target,n.anchor)),this._intro=!0}function S(t){k(this,t),this._state=e(e({JSON:JSON},{JSONminify:!1}),t.data),this._intro=!!t.intro,this._fragment=function(t,e){var n,s,l,d,y,g,_,v,p=e.JSON.stringify(e.keyboard,"",e.JSONminify?0:2);function k(){t.set({JSONminify:s.checked})}return{c(){n=c("div"),s=c("input"),l=u("\n\t"),(d=c("label")).textContent="JSON minify",y=u("\n\n\n"),g=c("pre"),_=u(p),b(s,"change",k),h(s,"type","checkbox"),d.className="svelte-vtlwtn",n.className="Rows svelte-vtlwtn"},m(t,o){a(t,n,o),r(n,s),s.checked=e.JSONminify,r(n,l),r(n,d),a(t,y,o),a(t,g,o),r(g,_),v=!0},p(t,e){t.JSONminify&&(s.checked=e.JSONminify),(t.JSON||t.keyboard||t.JSONminify)&&p!==(p=e.JSON.stringify(e.keyboard,"",e.JSONminify?0:2))&&m(_,p)},i(t,e){v||this.m(t,e)},o:o,d(t){t&&i(n),f(s,"change",k),t&&(i(y),i(g))}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor)),this._intro=!0}function C({keyboard:t}){return function(t){let e="";e+='// import "encoding/json"\n',e+='\n// Структуры\n\ntype keyboardButtonAction struct {\n\tLabel   string `json:"label,omitempty"`\n\tPayload string `json:"payload,omitempty"`\n\tType    string `json:"type"`\n}\n\ntype keyboardButton struct {\n\tAction keyboardButtonAction `json:"action"`\n\tColor  string               `json:"color"`\n}\n\ntype keyboardRow []keyboardButton\n\ntype keyboard struct {\n\tButtons []keyboardRow `json:"buttons"`\n\tOneTime bool          `json:"one_time"`\n}\n\n// Основной код\n\nvar buttons []keyboardRow\nvar button keyboardButton\nvar buttonAction keyboardButtonAction\n\n\n',console.log(t);for(let n=0;n<t.buttons.length;n++){const o=t.buttons[n];e+=`var row${n} []keyboardButton\n`,o.forEach(t=>{e+=`\nbuttonAction = keyboardButtonAction{\n\tLabel:   "${t.action.label.replace(/"/g,'\\"')}",\n\tPayload: "${t.action.payload.replace(/"/g,'\\"')}",\n\tType:    "${t.action.type.replace(/"/g,'\\"')}",\n}\nbutton = keyboardButton{\n\tAction: buttonAction,\n\tColor:  "${t.color}",\n}\n\nrow${n} = append(row${n}, button)\n`}),e+=`buttons = append(buttons, row${n})\n`}return e+=`\nkb := keyboard{\n\tButtons: buttons,\n\tOneTime: ${t.one_time},\n}\n\nbyteJSON, _ := json.Marshal(kb)\nkeyboardJSON := string(byteJSON)\n\n// fmt.Print(keyboardJSON)`}(t)}function J(t){var n,s,l,d;k(this,t),this._state=e({},t.data),this._recompute({keyboard:1},this._state),this._intro=!!t.intro,this._fragment=(n=this._state,{c(){s=c("pre"),l=u(n.code)},m(t,e){a(t,s,e),r(s,l),d=!0},p(t,e){t.code&&m(l,e.code)},i(t,e){d||this.m(t,e)},o:o,d(t){t&&i(s)}}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor)),this._intro=!0}e(O.prototype,N),e(x.prototype,N),e(S.prototype,N),e(J.prototype,N),J.prototype._recompute=function(t,e){t.keyboard&&this._differs(e.code,e.code=C(e))&&(t.code=!0)};var B={updateColor(t){const{keyboard:e,i:n,j:o}=this.get();e.buttons[n][o].color=t,this.set({keyboard:e})},addRow(){const{keyboard:t,i:e,j:n}=this.get();let o=t.buttons.length;o<10&&(t.buttons[o]=[{action:{type:"text",payload:'{"button": "1"}',label:"Label"},color:"default"}]),this.set({keyboard:t,i:o,j:0})},addColumn(t){const{keyboard:e,i:n,j:o}=this.get();let r=e.buttons[t].length;r<4&&(e.buttons[t][r]={action:{type:"text",payload:'{"button": "1"}',label:"Label"},color:"default"}),this.set({keyboard:e,i:t,j:r})},removeButton(){const{keyboard:t,i:e,j:n}=this.get();let o=e,r=n,a=t.buttons.length,i=t.buttons[0].length;console.log(a,i),(a>1||i>1)&&(t.buttons[e].splice(n,1),0==t.buttons[e].length?(t.buttons.splice(e,1),e>0&&(o=e-1),r=t.buttons[o].length-1):n>0&&(r=n-1)),this.set({keyboard:t,i:o,j:r})}};function $(t,e,n){const o=Object.create(t);return o.color=e[n],o}function w(t){const{component:e,ctx:n}=this._svelte;e.addColumn(n.ii)}function A(t,e,n){const o=Object.create(t);return o.button=e[n],o.jj=n,o}function P(t,e,n){const o=Object.create(t);return o.buttons=e[n],o.ii=n,o}function V(t,e){var n,o={label:e.button.action.label,color:e.button.color,select:e.i==e.ii&&e.j==e.jj?"1":"0"},r=new O({root:t.root,store:t.store,data:o});return r.on("click",function(n){t.set({i:e.ii,j:e.jj})}),{c(){r._fragment.c()},m(t,e){r._mount(t,e),n=!0},p(t,n){e=n;var o={};t.keyboard&&(o.label=e.button.action.label),t.keyboard&&(o.color=e.button.color),(t.i||t.j)&&(o.select=e.i==e.ii&&e.j==e.jj?"1":"0"),r._set(o)},i(t,e){n||this.m(t,e)},o(t){n&&(r&&r._fragment.o(t),n=!1)},d(t){r.destroy(t)}}}function L(t,e){var n;return{c(){(n=c("div")).textContent="+",n._svelte={component:t,ctx:e},b(n,"click",w),n.className="button-add svelte-1egbdsg"},m(t,e){a(t,n,e)},p(t,o){e=o,n._svelte.ctx=e},d(t){t&&i(n),f(n,"click",w)}}}function R(t,e){for(var o,b,f,h,m=e.buttons,y=[],g=0;g<m.length;g+=1)y[g]=V(t,A(e,m,g));function _(t,e,n){y[t]&&y[t].o(()=>{e&&(y[t].d(e),y[t]=null),n&&n()})}var v=new x({root:t.root,store:t.store,slots:{default:l()}}),p=e.keyboard.buttons[e.ii].length<4&&L(t,e);return{c(){o=c("div");for(var t=0;t<y.length;t+=1)y[t].c();b=d(),v._fragment.c(),f=u("\n\t\t\t"),p&&p.c(),o.className="row svelte-1egbdsg"},m(t,e){a(t,o,e);for(var n=0;n<y.length;n+=1)y[n].i(v._slotted.default,null);r(v._slotted.default,b),v._mount(o,null),r(o,f),p&&p.m(o,null),h=!0},p(e,n){if(e.keyboard||e.i||e.j){m=n.buttons;for(var r=0;r<m.length;r+=1){const o=A(n,m,r);y[r]?y[r].p(e,o):(y[r]=V(t,o),y[r].c()),y[r].i(b.parentNode,b)}for(;r<y.length;r+=1)_(r,1)}n.keyboard.buttons[n.ii].length<4?p||((p=L(t,n)).c(),p.m(o,null)):p&&(p.d(1),p=null)},i(t,e){h||this.m(t,e)},o(t){if(!h)return;t=n(t,2);const e=n(t,(y=y.filter(Boolean)).length);for(let t=0;t<y.length;t+=1)_(t,0,e);v&&v._fragment.o(t),h=!1},d(t){t&&i(o),s(y,t),v.destroy(),p&&p.d()}}}function T(t,e){var n;function o(e){t.addRow()}return{c(){(n=c("div")).textContent="Добавить",b(n,"click",o),n.className="button-add svelte-1egbdsg"},m(t,e){a(t,n,e)},d(t){t&&i(n),f(n,"click",o)}}}function G(t,e){var n;return{c(){(n=c("b")).textContent="Пустой текст!",n.className="note svelte-1egbdsg",y(n,"color","#db3b3b")},m(t,e){a(t,n,e)},d(t){t&&i(n)}}}function q(t,e){var n;return{c(){(n=c("b")).textContent="Слишком много символов!",n.className="note svelte-1egbdsg",y(n,"color","#db3b3b")},m(t,e){a(t,n,e)},d(t){t&&i(n)}}}function E(t,e){var n;return{c(){(n=c("b")).textContent="Невалидный JSON!",n.className="note svelte-1egbdsg",y(n,"color","#db3b3b")},m(t,e){a(t,n,e)},d(t){t&&i(n)}}}function H(t,e){var n,o={label:e.keyboard.buttons[e.i][e.j].color==e.color?"X":"",color:e.color},r=new O({root:t.root,store:t.store,data:o});return r.on("click",function(e){t.updateColor(e.color)}),{c(){r._fragment.c()},m(t,e){r._mount(t,e),n=!0},p(t,e){var n={};(t.keyboard||t.i||t.j)&&(n.label=e.keyboard.buttons[e.i][e.j].color==e.color?"X":""),r._set(n)},i(t,e){n||this.m(t,e)},o(t){n&&(r&&r._fragment.o(t),n=!1)},d(t){r.destroy(t)}}}function M(t,e){var n,o,s,l,h,m,y,v,p=!1;function k(){p=!0,t.set({select:_(n)}),p=!1}var j=[D,X],N=[];function O(t){return"JSON"==t.select?0:"Golang"==t.select?1:-1}return~(h=O(e))&&(m=N[h]=j[h](t,e)),{c(){n=c("select"),(o=c("option")).textContent="JSON",(s=c("option")).textContent="Golang",l=u("\n\n    "),m&&m.c(),y=d(),o.__value="JSON",o.value=o.__value,s.__value="Golang",s.value=s.__value,b(n,"change",k),"select"in e||t.root._beforecreate.push(k),n.className="header svelte-1egbdsg"},m(t,i){a(t,n,i),r(n,o),r(n,s),g(n,e.select),a(t,l,i),~h&&N[h].m(t,i),a(t,y,i),v=!0},p(e,o){!p&&e.select&&g(n,o.select);var r=h;(h=O(o))===r?~h&&N[h].p(e,o):(m&&m.o(function(){N[r].d(1),N[r]=null}),~h?((m=N[h])||(m=N[h]=j[h](t,o)).c(),m.m(y.parentNode,y)):m=null)},i(t,e){v||this.m(t,e)},o(t){v&&(m?m.o(t):t(),v=!1)},d(t){t&&i(n),f(n,"change",k),t&&i(l),~h&&N[h].d(t),t&&i(y)}}}function I(t,e){var n,s,l,d,b;return{c(){(n=c("h3")).textContent="Ошибки",s=u("\n    "),l=c("pre"),d=u(e.errorValid)},m(t,e){a(t,n,e),a(t,s,e),a(t,l,e),r(l,d),b=!0},p(t,e){t.errorValid&&m(d,e.errorValid)},i(t,e){b||this.m(t,e)},o:o,d(t){t&&(i(n),i(s),i(l))}}}function X(t,e){var n,o={keyboard:e.keyboard},r=new J({root:t.root,store:t.store,data:o});return{c(){r._fragment.c()},m(t,e){r._mount(t,e),n=!0},p(t,e){var n={};t.keyboard&&(n.keyboard=e.keyboard),r._set(n)},i(t,e){n||this.m(t,e)},o(t){n&&(r&&r._fragment.o(t),n=!1)},d(t){r.destroy(t)}}}function D(t,e){var n,o={keyboard:e.keyboard},r=new S({root:t.root,store:t.store,data:o});return{c(){r._fragment.c()},m(t,e){r._mount(t,e),n=!0},p(t,e){var n={};t.keyboard&&(n.keyboard=e.keyboard),r._set(n)},i(t,e){n||this.m(t,e)},o(t){n&&(r&&r._fragment.o(t),n=!1)},d(t){r.destroy(t)}}}function F(t){k(this,t),this._state=e({},t.data),this._recompute({keyboard:1,i:1,j:1},this._state),this._intro=!!t.intro,this._fragment=function(t,e){for(var o,m,y,g,_,v,p,k,j,N,O,S,C,J,B,w,A,V,L,X,D,F,K,W,z,Q,U,Y,Z,tt,et,nt,ot,rt,at,it,st,lt,ct,ut,dt,bt=!1,ft=!1,ht=e.keyboard.buttons,mt=[],yt=0;yt<ht.length;yt+=1)mt[yt]=R(t,P(e,ht,yt));function gt(t,e,n){mt[t]&&mt[t].o(()=>{e&&(mt[t].d(e),mt[t]=null),n&&n()})}var _t=e.keyboard.buttons.length<10&&T(t);function vt(){bt=!0,e.keyboard.buttons[e.i][e.j].action.label=A.value,t.set({keyboard:e.keyboard,i:e.i,j:e.j}),bt=!1}var pt=""===e.keyboard.buttons[e.i][e.j].action.label&&G(),kt=e.keyboard.buttons[e.i][e.j].action.label.length>41&&q();function jt(){ft=!0,e.keyboard.buttons[e.i][e.j].action.payload=W.value,t.set({keyboard:e.keyboard,i:e.i,j:e.j}),ft=!1}var Nt=!e.validPayload&&E(),Ot=["primary","default","negative","positive"],xt=[];for(yt=0;yt<Ot.length;yt+=1)xt[yt]=H(t,$(e,Ot,yt));function St(t,e,n){xt[t]&&xt[t].o(()=>{e&&(xt[t].d(e),xt[t]=null),n&&n()})}var Ct=new x({root:t.root,store:t.store,slots:{default:l()}});function Jt(e){t.removeButton()}function Bt(){e.keyboard.one_time=at.checked,t.set({keyboard:e.keyboard})}var $t=[I,M],wt=[];function At(t){return t.errorValid?0:1}return ct=At(e),ut=wt[ct]=$t[ct](t,e),{c(){o=c("div"),(m=c("h1")).textContent="Генератор клавиатуры для VK",y=u("\n\t\n  "),(g=c("p")).innerHTML='\n\t\t\t\t\tГенерирует <a href="https://vk.com/dev/bots_docs_3">клавиатуру</a> для ботов. \n\t\t\t    Проверить клавиатуру можно отправив JSON <a href="https://vk.com/im?sel=-174472256">боту</a>.\n\t\t\t\t',_=u("\n  "),(v=c("p")).innerHTML='<a href="https://github.com/severecloud/vk-keyboard">GitHub</a>',p=u("\n\n  "),(k=c("h3")).textContent="Клавиатура",j=u("\n\n\t"),N=c("div");for(var t=0;t<mt.length;t+=1)mt[t].c();for(O=u(" \n    "),_t&&_t.c(),S=u("\n\n    "),C=c("div"),J=c("div"),(B=c("label")).textContent="Текст",w=u("\n        "),A=c("input"),V=u("\n        "),pt&&pt.c(),L=u("\n        "),kt&&kt.c(),X=u("\n\n      "),D=c("div"),(F=c("label")).textContent="Полезная нагрузка",K=u("\n        "),W=c("input"),z=u(" \n        "),Nt&&Nt.c(),Q=u("\n\n      "),U=c("div"),(Y=c("label")).textContent="Цвет",Z=u("\n        "),t=0;t<xt.length;t+=1)xt[t].c();tt=d(),Ct._fragment.c(),et=u("\n\n      "),(nt=c("div")).textContent="Удалить",ot=u("\n\n    "),rt=c("div"),at=c("input"),it=u("\n      "),(st=c("label")).textContent="скрывать клавиатуру сразу",lt=u("\n\n  "),ut.c(),B.className="svelte-1egbdsg",b(A,"input",vt),h(A,"type","text"),J.className="block-item svelte-1egbdsg",F.className="svelte-1egbdsg",b(W,"input",jt),h(W,"type","text"),D.className="block-item svelte-1egbdsg",Y.className="svelte-1egbdsg",U.className="block-item svelte-1egbdsg",b(nt,"click",Jt),nt.className="button-remove svelte-1egbdsg",C.className="border svelte-1egbdsg",b(at,"change",Bt),h(at,"type","checkbox"),st.className="svelte-1egbdsg",rt.className="one-time svelte-1egbdsg",N.className="buttons-main svelte-1egbdsg",o.className="main svelte-1egbdsg"},m(t,n){a(t,o,n),r(o,m),r(o,y),r(o,g),r(o,_),r(o,v),r(o,p),r(o,k),r(o,j),r(o,N);for(var i=0;i<mt.length;i+=1)mt[i].i(N,null);for(r(N,O),_t&&_t.m(N,null),r(N,S),r(N,C),r(C,J),r(J,B),r(J,w),r(J,A),A.value=e.keyboard.buttons[e.i][e.j].action.label,r(J,V),pt&&pt.m(J,null),r(J,L),kt&&kt.m(J,null),r(C,X),r(C,D),r(D,F),r(D,K),r(D,W),W.value=e.keyboard.buttons[e.i][e.j].action.payload,r(D,z),Nt&&Nt.m(D,null),r(C,Q),r(C,U),r(U,Y),r(U,Z),i=0;i<xt.length;i+=1)xt[i].i(Ct._slotted.default,null);r(Ct._slotted.default,tt),Ct._mount(U,null),r(C,et),r(C,nt),r(N,ot),r(N,rt),r(rt,at),at.checked=e.keyboard.one_time,r(rt,it),r(rt,st),r(o,lt),wt[ct].m(o,null),dt=!0},p(n,r){if(e=r,n.keyboard||n.i||n.j){ht=e.keyboard.buttons;for(var a=0;a<ht.length;a+=1){const o=P(e,ht,a);mt[a]?mt[a].p(n,o):(mt[a]=R(t,o),mt[a].c()),mt[a].i(N,O)}for(;a<mt.length;a+=1)gt(a,1)}if(e.keyboard.buttons.length<10?_t||((_t=T(t)).c(),_t.m(N,S)):_t&&(_t.d(1),_t=null),!bt&&(n.keyboard||n.i||n.j)&&(A.value=e.keyboard.buttons[e.i][e.j].action.label),""===e.keyboard.buttons[e.i][e.j].action.label?pt||((pt=G()).c(),pt.m(J,L)):pt&&(pt.d(1),pt=null),e.keyboard.buttons[e.i][e.j].action.label.length>41?kt||((kt=q()).c(),kt.m(J,null)):kt&&(kt.d(1),kt=null),!ft&&(n.keyboard||n.i||n.j)&&(W.value=e.keyboard.buttons[e.i][e.j].action.payload),e.validPayload?Nt&&(Nt.d(1),Nt=null):Nt||((Nt=E()).c(),Nt.m(D,null)),n.keyboard||n.i||n.j){for(Ot=["primary","default","negative","positive"],a=0;a<Ot.length;a+=1){const o=$(e,Ot,a);xt[a]?xt[a].p(n,o):(xt[a]=H(t,o),xt[a].c()),xt[a].i(tt.parentNode,tt)}for(;a<xt.length;a+=1)St(a,1)}n.keyboard&&(at.checked=e.keyboard.one_time);var i=ct;(ct=At(e))===i?wt[ct].p(n,e):(ut.o(function(){wt[i].d(1),wt[i]=null}),(ut=wt[ct])||(ut=wt[ct]=$t[ct](t,e)).c(),ut.m(o,null))},i(t,e){dt||this.m(t,e)},o(t){if(!dt)return;t=n(t,4);const e=n(t,(mt=mt.filter(Boolean)).length);for(let t=0;t<mt.length;t+=1)gt(t,0,e);const o=n(t,(xt=xt.filter(Boolean)).length);for(let t=0;t<xt.length;t+=1)St(t,0,o);Ct&&Ct._fragment.o(t),ut?ut.o(t):t(),dt=!1},d(t){t&&i(o),s(mt,t),_t&&_t.d(),f(A,"input",vt),pt&&pt.d(),kt&&kt.d(),f(W,"input",jt),Nt&&Nt.d(),s(xt,t),Ct.destroy(),f(nt,"click",Jt),f(at,"change",Bt),wt[ct].d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),p(this)),this._intro=!0}e(F.prototype,N),e(F.prototype,B),F.prototype._recompute=function(t,e){(t.keyboard||t.i||t.j)&&this._differs(e.validPayload,e.validPayload=function({keyboard:t,i:e,j:n}){let o,r=t.buttons[e][n].action.payload;try{o=JSON.parse(r)}catch(t){return!1}return(t=>t instanceof Object&&!Array.isArray(t))(o)&&0!=Object.keys(o).length&&r.length<256}(e))&&(t.validPayload=!0),t.keyboard&&this._differs(e.errorValid,e.errorValid=function({keyboard:t}){let e="";for(let n=0;n<t.buttons.length;n++){const o=t.buttons[n];for(let t=0;t<o.length;t++){const r=o[t];""==r.action.label&&(e+=`${n+1}:${t+1} пустой текст\n`),r.action.label.length>41&&(e+=`${n+1}:${t+1} больше 40 символов в тексте\n`);let a,i=t=>t instanceof Object&&!Array.isArray(t),s=r.action.payload;try{i(a=JSON.parse(s))||(e+=`${n+1}:${t+1} требуется объект в json вида {"button": 1}\n`),0==Object.keys(a).length&&(e+=`${n+1}:${t+1} пустой объект в json\n`),s.length>255&&(e+=`${n+1}:${t+1} больше 255 символов в json\n`)}catch(o){e+=`${n+1}:${t+1} невалидный json\n`}}}return localStorage.setItem("keyboard",JSON.stringify(t)),e}(e))&&(t.errorValid=!0)};var K=localStorage.getItem("keyboard");if(K)var W=JSON.parse(K);else W={one_time:!1,buttons:[[{action:{type:"text",payload:'{"button": "1"}',label:"Red"},color:"negative"},{action:{type:"text",payload:'{"button": "2"}',label:"Green"},color:"positive"}],[{action:{type:"text",payload:'{"button": "3"}',label:"White"},color:"default"},{action:{type:"text",payload:'{"button": "4"}',label:"Blue"},color:"primary"}]]};return new F({target:document.body,data:{keyboard:W,i:0,j:0,errorValid:"",select:"JSON"}})}();
//# sourceMappingURL=bundle.js.map
