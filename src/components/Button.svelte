<script>
  import { createEventDispatcher } from "svelte";
  
  const dispatch = createEventDispatcher();

  export let label = "";
  export let color = "";
  export let type = "";
  export let select = false;

  let text = (type, label) => {
    switch (type) {
      case "location":
        return "Отправить своё местоположение";
      case "vkpay":
        return "Оплатить через";
      default:
        return label;
    }
  };

  let background = (type, color) => {
    switch (type) {
      case "location":
        return "secondary";
      case "vkpay":
        return "primary";
      case "open_app":
        return "secondary";
      case "open_link":
        return "secondary";
      default:
        return color == "" ? "primary" : color;
    }
  };
  let bold=false;
  $: bold = type=="text"? false : true;
</script>

<style>
  .button {
    display: flex;
    align-items:center;
    justify-content: center;
    flex: 1;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    vertical-align: middle;
    width: 100%;
    height: 38px;
    margin: 5px;
    border-radius: 6px;
    cursor: pointer;
    font-family: -apple-system,BlinkMacSystemFont,Roboto,Open Sans,Helvetica Neue,Noto Sans Armenian,Noto Sans Bengali,Noto Sans Cherokee,Noto Sans Devanagari,Noto Sans Ethiopic,Noto Sans Georgian,Noto Sans Hebrew,Noto Sans Kannada,Noto Sans Khmer,Noto Sans Lao,Noto Sans Osmanya,Noto Sans Tamil,Noto Sans Telugu,Noto Sans Thai,sans-serif;
    font-size: 13px;
    font-weight: 300;
    padding: 0 12px;
  }
  .button span {
    display: inline-block;
    align-items: center;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    vertical-align: middle;
    
  }
  .button svg {
    height: 24px;
    margin: 0 4px 0 2px;
  }

  .bold span {
    font-weight: 500;
  }
  .bold.secondary span {
    color: #3670b3;
  }
  
  .select {
    background: repeating-linear-gradient(45deg, #0000, #0000 15px, #fff6 0, #fff6 30px);
  }


  .add {
    border: 1px solid #d1d5da;
  }

  .primary {
    background-color: #5181b8;
    color: #fff;
  }
  .primary:hover {
    background-color: #5b88bd;
  }
  .primary:active {
    background-color: #4872a3;
  }

  .secondary {
    background-color: #e5ebf1;
    color: #55677d;
  }
  .secondary:hover {
    background-color: #dfe6ed;
  }
  .secondary:active {
    background-color: #dae2ea;
  }

  .negative {
    background-color: #e64646;
    color: #fff;
  }
  .negative:hover {
    background-color: #eb5050;
  }
  .negative:active {
    background-color: #db3b3b;
  }

  .positive {
    background-color: #4bb34b;
    color: #fff;
  }
  .positive:hover {
    background-color: #51b851;
  }
  .positive:active {
    background-color: #43a843;
  }
</style>

<div class="button {background(type, color)}" class:bold class:select on:click={() => dispatch("click")} >
  
    {#if type == 'location'}
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path
          fill="#528bcc"
          d="M6,10q0,3.27,5,9.14h0a1.29,1.29,0,0,0,1.82.14l.14-.14q5-5.88,5-9.14a5.78,5.78,0,0,0-6-6A5.78,5.78,0,0,0,6,10Zm4,0a2,2,0,1,1,2,2A2,2,0,0,1,10,10Z" />
      </svg>
    {:else if type == 'open_app'}
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <path
          fill="#528bcc"
          d="M14.5,19h3A1.5,1.5,0,0,0,19,17.5v-3A1.5,1.5,0,0,0,17.5,13h-3A1.5,1.5,0,0,0,13,14.5v3A1.5,1.5,0,0,0,14.5,19ZM11,17.5v-3A1.5,1.5,0,0,0,9.5,13h-3A1.5,1.5,0,0,0,5,14.5v3A1.5,1.5,0,0,0,6.5,19h3A1.5,1.5,0,0,0,11,17.5ZM6.5,11h3A1.5,1.5,0,0,0,11,9.5v-3A1.5,1.5,0,0,0,9.5,5h-3A1.5,1.5,0,0,0,5,6.5v3A1.5,1.5,0,0,0,6.5,11Zm6.32-1.94,2.12,2.12a1.49,1.49,0,0,0,2.12,0l2.12-2.12a1.49,1.49,0,0,0,0-2.12L17.06,4.82a1.49,1.49,0,0,0-2.12,0L12.82,6.94A1.49,1.49,0,0,0,12.82,9.06Z" />
      </svg>
    {/if}
  <span>
    {text(type, label)}
  </span>
    {#if type == 'vkpay'}
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 24">
        <path
          fill="#FFFFFF"
          fill-rule="evenodd"
          d="M28.0263591 7.94C28.5175203 7.94 28.9858297 8.04049933 29.4313015
          8.24150101 29.8767732 8.44250268 30.2679829 8.72390081 30.6049423
          9.08570383 30.9419017 9.44750684 31.210323 9.87534685 31.4102142
          10.3692367 31.6101053 10.8631265 31.7100494 11.4029515 31.7100494
          11.9887278 31.7100494 12.5745041 31.6101053 13.1143291 31.4102142
          13.6082189 31.210323 14.1021088 30.9419017 14.5299488 30.6049423
          14.8917518 30.2679829 15.2535548 29.8767732 15.5349529 29.4313015
          15.7359546 28.9858297 15.9369563 28.5175203 16.0374556 28.0263591
          16.0374556 27.6951109 16.0374556 27.4067008 15.9972559 27.1611203
          15.9168552 26.9155397 15.8364545 26.7013738 15.7503123 26.5186161
          15.6584258 26.3130138 15.5435677 26.1302589 15.4114828 25.970346
          15.2621673L25.970346 18.7078931 24 18.7078931 24 8.02614314 25.4563427
          8.02614314 25.7990115 8.80143145C25.9703468 8.64063011 26.170235
          8.49705963 26.398682 8.37071572 26.592862 8.26734343 26.8270168
          8.16971551 27.1011532 8.07782903 27.3752897 7.98594255 27.6836886 7.94
          28.0263591 7.94zM25.7990115 11.9887278C25.7990115 12.643419 25.9874775
          13.1660155 26.3644152 13.556533 26.7413528 13.9470506 27.2096622
          14.1423064 27.7693575 14.1423064 28.3290528 14.1423064 28.7973622
          13.9470506 29.1742998 13.556533 29.5512375 13.1660155 29.7397035
          12.643419 29.7397035 11.9887278 29.7397035 11.3340366 29.5512375
          10.8114401 29.1742998 10.4209226 28.7973622 10.030405 28.3290528
          9.83514919 27.7693575 9.83514919 27.2096622 9.83514919 26.7413528
          10.030405 26.3644152 10.4209226 25.9874775 10.8114401 25.7990115
          11.3340366 25.7990115 11.9887278zM36.339374 7.94C36.7848457 7.94
          37.1960442 8.01752806 37.5729819 8.17258649 37.9499195 8.32764493
          38.2754517 8.54300064 38.5495881 8.81866008 38.8237246 9.09431952
          39.0378905 9.4216602 39.1920923 9.80069193 39.346294 10.1797237
          39.4233937 10.5932066 39.4233937 11.0411532L39.4233937 15.9513125
          37.9670511 15.9513125 37.6243822 15.1760242C37.4416246 15.3368255
          37.2417364 15.480396 37.0247117 15.6067399 36.8305317 15.721598
          36.596377 15.8220973 36.3222405 15.9082409 36.0481041 15.9943845
          35.7397052 16.0374556 35.3970346 16.0374556 34.5403582 16.0374556
          33.8835827 15.8278427 33.4266886 15.4086107 32.9697945 14.9893786
          32.7413509 14.452425 32.7413509 13.7977338 32.7413509 13.4072163
          32.8184506 13.0482901 32.9726524 12.7209445 33.1268541 12.3935989
          33.3867088 12.1122008 33.7522241 11.8767417 34.1177393 11.6412826
          34.6003265 11.4575124 35.2 11.3254256 35.7996735 11.1933388 36.5506819
          11.1272964 37.4530478 11.1272964 37.4530478 10.6908356 37.3359704
          10.3520093 37.1018122 10.1108072 36.867654 9.86960524 36.5563995
          9.74900604 36.1680395 9.74900604 35.9053254 9.74900604 35.6968706
          9.79494859 35.5426689 9.88683507 35.3884671 9.97872155 35.2656787
          10.0763495 35.1742998 10.1797218 35.0714987 10.3060657 35.0029656
          10.4496361 34.9686985 10.6104375L32.9983526 10.6104375C33.044042
          10.2428916 33.1496971 9.89832243 33.3153213 9.57671975 33.4809454
          9.25511707 33.7065334 8.97371894 33.9920923 8.73251693 34.2776511
          8.49131492 34.617461 8.29893049 35.0115321 8.15535786 35.4056033
          8.01178524 35.8482128 7.94 36.339374 7.94zM35.7397035
          14.486879C36.2537093 14.486879 36.6677634 14.3346943 36.9818781
          14.0303203 37.2959928 13.7259464 37.4530478 13.3325633 37.4530478
          12.8501593L37.4530478 12.5055867C36.8705078 12.5055867 36.4021984
          12.5314294 36.0481054 12.5831155 35.6940125 12.6348016 35.4170246
          12.7094583 35.2171334 12.8070877 35.0172423 12.9047171 34.8830316
          13.0224449 34.8144975 13.1602746 34.7459634 13.2981043 34.7116969
          13.4531604 34.7116969 13.6254476 34.7116969 13.8436779 34.8087854
          14.0418052 35.0029654 14.2198353 35.1971454 14.3978653 35.4427223
          14.486879 35.7397035 14.486879zM40.1186161 8.02614314L42.1746293
          8.02614314 44.1449753 13.1947318 45.9439868 8.02614314 48
          8.02614314C47.4403047 9.47335521 46.9320177 10.7827179 46.4751236
          11.9542705 46.2809436 12.4596462 46.089622 12.9535286 45.9011532
          13.4359326 45.7126844 13.9183367 45.5442072 14.3576623 45.3957166
          14.7539228 45.2472261 15.1501832 45.1215821 15.4803953 45.0187809
          15.7445689 44.9159797 16.0087425 44.8531577 16.1637987 44.830313
          16.2097419 44.636133 16.6806601 44.4448115 17.079786 44.2563427
          17.4071316 44.0678739 17.7344772 43.8651301 18.0015183 43.6481054
          18.2082629 43.4310807 18.4150074 43.196926 18.5643207 42.9456343
          18.6562072 42.6943425 18.7480937 42.408788 18.7940362 42.0889621
          18.7940362 41.9975833 18.7940362 41.9090614 18.7911648 41.8233937
          18.7854219 41.7377261 18.779679 41.6663375 18.7710648 41.6092257
          18.759579 41.5292692 18.7480932 41.4607361 18.7308647 41.4036244
          18.7078931L41.4036244 17.0711733C41.8376738 17.0711733 42.1717726
          16.9735454 42.4059308 16.7782867 42.640089 16.5830279 42.8199884
          16.3360867 42.9456343 16.0374556L43.1169687 15.6067399 40.1186161
          8.02614314zM9.54666667 4C14.0266667 4 9.97333333 4 14.4533333 4
          18.9333333 4 20 5.06666667 20 9.54666667 20 14.0266667 20 9.97333333
          20 14.4533333 20 18.9333333 18.9333333 20 14.4533333 20 9.97333333 20
          14.0266667 20 9.54666667 20 5.06666667 20 4 18.9333333 4 14.4533333 4
          9.97333333 4 12.0483607 4 9.54666667 4 5.06666667 5.06666667 4
          9.54666667 4zM17.1861661 9.42885176C17.2602965 9.18164766 17.1861661 9
          16.8333537 9L15.666687 9C15.3700421 9 15.2332845 9.15691696 15.159113
          9.32994954 15.159113 9.32994954 14.5658232 10.7760781 13.7253498
          11.7154331 13.4534356 11.9873473 13.3298232 12.0738636 13.1815008
          12.0738636 13.1073498 12.0738636 13 11.9873473 13 11.7401638L13
          9.42885176C13 9.13220684 12.9139117 9 12.666687 9L10.8333537
          9C10.6479763 9 10.5364889 9.13767969 10.5364889 9.26816395 10.5364889
          9.5493779 10.956705 9.61422912 11.0000203 10.4052822L11.0000203
          12.123325C11.0000203 12.5 10.9319949 12.5682924 10.7836724 12.5682924
          10.3881665 12.5682924 9.42609705 11.1157034 8.85550102 9.45356188
          8.74367794 9.13049914 8.63152112 9 8.33335368 9L7.16668701
          9C6.83335368 9 6.76668294 9.15691696 6.76668294 9.32994954 6.76668294
          9.63895981 7.16220951 11.1716047 8.60831749 13.1986372 9.57238263
          14.582939 10.9306871 15.3333333 12.166687 15.3333333 12.9082787
          15.3333333 13.0000203 15.1666667 13.0000203 14.8795839L13.0000203
          13.8333333C13.0000203 13.5 13.0702744 13.4334759 13.3051131 13.4334759
          13.4781457 13.4334759 13.7747906 13.5199922 14.4669621 14.187433
          15.2579947 14.9784655 15.3884069 15.3333333 15.8333537
          15.3333333L17.0000203 15.3333333C17.3333537 15.3333333 17.5000203
          15.1666667 17.4038729 14.8377593 17.2986588 14.5099509 16.9209835
          14.0343445 16.4198437 13.4705514 16.1479089 13.1491963 15.7400375
          12.8031312 15.6164252 12.6300574 15.4433926 12.4076046 15.4928334
          12.3087024 15.6164252 12.1109597 15.6164252 12.1109597 17.0378436
          10.1086373 17.1861661 9.42885176z" />
      </svg>
    {/if}

    {#if type == 'open_link'}
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="none" stroke-linecap="round" stroke-width="1.7" stroke-linejoin="round" stroke="#528bcc" d="M6 4h6v6m-1-5l-6 6"/></svg>
    {/if}

  
</div>
